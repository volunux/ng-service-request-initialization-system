(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{lrLS:function(t,e,n){"use strict";n.r(e),n.d(e,"UploadModule",(function(){return Y}));var i=n("Yvf7"),s=n("mHYI"),c=n("kPid"),r=n("TS3g"),l=n("hxwH"),a=n("jV/k"),o=n("oECA"),b=n("O6Zd"),u=n("VcWf"),h=n("Ub9n"),d=n("FBrc"),f=n("EUGn");let p=(()=>{class t{constructor(t,e,n){this.apiConfig=t,this.http=e,this.ems=n}getAllEntry(t,e){return this.http.get(`${this.apiConfig.host}/${this.$sa}/entries`,{params:t}).pipe(Object(o.a)(this.handleError(this.$systemType+" Entries",[])))}$deleteManyEntry(t){return this.http.patch(`${this.apiConfig.host}/${this.$sa}/entry/many/delete`,{entries:t}).pipe(Object(b.a)(t=>({manyDeleted:!0})),Object(o.a)(this.handleError(this.$systemType+" Entries Delete",[])))}handleError(t="operation",e){return t=>(this.ems.message=t,Object(a.a)(e))}}return t.\u0275fac=function(e){return new(e||t)(h.Tb(u.b),h.Tb(d.b),h.Tb(f.a))},t.\u0275prov=h.Gb({token:t,factory:t.\u0275fac}),t})();var g=n("Fk62"),y=n("/zEo"),m=n("Hk0H"),O=n("RPGP"),k=n("G+IB"),w=n("9nlD"),P=n("J1Ni"),$=n("9yhg"),I=n("+ef2"),E=n("Rxsk"),v=n("RBZI"),z=n("TY4h");function L(t,e){if(1&t&&(h.Pb(0,"h2"),h.yc(1),h.Ob()),2&t){const t=h.ac();h.zb(1),h.Ac(" ",t.title," ")}}function A(t,e){if(1&t&&h.Lb(0,"app-view-description",7),2&t){const t=h.ac();h.gc("view-description",t.view)("system-type",t.systemType)}}function T(t,e){if(1&t){const t=h.Qb();h.Pb(0,"app-notification-screen",8),h.Wb("finished",(function(){return h.rc(t),h.ac().removeNotification()})),h.Ob()}if(2&t){const t=h.ac();h.gc("notified",t.notificationAvailable)("message",t.notificationMessage)}}function N(t,e){1&t&&(h.Pb(0,"td",16),h.yc(1," Nil "),h.Ob())}function j(t,e){if(1&t&&(h.Pb(0,"td",16),h.yc(1),h.Ob()),2&t){const t=h.ac().$implicit;h.zb(1),h.Ac(" ",null==t?null:t._id," ")}}function x(t,e){if(1&t&&(h.Pb(0,"td",16),h.yc(1),h.Ob()),2&t){const t=h.ac().$implicit;h.zb(1),h.Ac(" ",null==t?null:t.entrySlug," ")}}function M(t,e){if(1&t&&(h.Pb(0,"td",16),h.yc(1),h.Ob()),2&t){const t=h.ac().$implicit;h.zb(1),h.Ac(" ",null==t?null:t.status," ")}}function C(t,e){if(1&t&&(h.Pb(0,"td",16),h.yc(1),h.Ob()),2&t){const t=h.ac().$implicit;h.zb(1),h.Ac(" ",null==t?null:t.num," ")}}function D(t,e){if(1&t&&(h.Pb(0,"td",16),h.yc(1),h.bc(2,"date"),h.Ob()),2&t){const t=h.ac().$implicit;h.zb(1),h.Ac(" ",h.dc(2,1,null==t?null:t.createdAt,"longDate")," ")}}function F(t,e){if(1&t){const t=h.Qb();h.Nb(0),h.Pb(1,"input",25,26),h.Wb("click",(function(){h.rc(t);const e=h.qc(2),n=h.ac(3),i=n.$implicit,s=n.index;return h.ac(2).addEntryToDeleteList(null==i?null:i.num,e.checked,s)})),h.Ob(),h.Lb(3,"span",27),h.Mb()}if(2&t){const t=e.$implicit,n=h.ac(3).$implicit;h.zb(1),h.gc("checked",t==(null==n?null:n.num))}}function S(t,e){if(1&t&&(h.Nb(0),h.wc(1,F,4,1,"ng-container",24),h.Mb()),2&t){const t=h.ac(4);h.zb(1),h.gc("ngForOf",t.esdl)}}function W(t,e){if(1&t){const t=h.Qb();h.Pb(0,"input",28,26),h.Wb("click",(function(){h.rc(t);const e=h.qc(1),n=h.ac(2),i=n.$implicit,s=n.index;return h.ac(2).addEntryToDeleteList(null==i?null:i.num,e.checked,s)})),h.Ob(),h.Lb(2,"span",27)}}function B(t,e){if(1&t&&(h.Pb(0,"label",21),h.wc(1,S,2,1,"ng-container",22),h.wc(2,W,3,0,"ng-template",null,23,h.xc),h.Ob()),2&t){const t=h.qc(3),e=h.ac(3);h.zb(1),h.gc("ngIf",e.esdl.length)("ngIfElse",t)}}function U(t,e){if(1&t&&(h.Pb(0,"tr"),h.Pb(1,"td",16),h.yc(2),h.Ob(),h.wc(3,N,2,0,"ng-template",null,17,h.xc),h.wc(5,j,2,1,"td",18),h.wc(6,x,2,1,"td",18),h.wc(7,M,2,1,"td",18),h.wc(8,C,2,1,"td",18),h.wc(9,D,3,4,"td",18),h.Pb(10,"td",11),h.Pb(11,"button",19),h.yc(12," Deleteable "),h.Ob(),h.wc(13,B,4,2,"label",20),h.Ob(),h.Ob()),2&t){const t=e.$implicit,n=e.index,i=h.qc(4);h.zb(2),h.Ac(" ",n+1,". "),h.zb(3),h.gc("ngIf",null==t?null:t._id)("ngIfElse",i),h.zb(1),h.gc("ngIf",null==t?null:t.entrySlug)("ngIfElse",i),h.zb(1),h.gc("ngIf",null==t?null:t.status)("ngIfElse",i),h.zb(1),h.gc("ngIf",null==t?null:t.num)("ngIfElse",i),h.zb(1),h.gc("ngIf",null==t?null:t.createdAt)("ngIfElse",i),h.zb(4),h.gc("ngIf",!0)}}function q(t,e){if(1&t&&h.Lb(0,"app-pagination",29),2&t){const t=h.ac(2);h.gc("entries-length",t.$entriesLength)("entry-ref",t.$entryRef)("page-number",t.pageNumber)}}function H(t,e){if(1&t&&(h.Pb(0,"div"),h.Pb(1,"table",9),h.Pb(2,"caption",10),h.yc(3," Entries "),h.Ob(),h.Pb(4,"colgroup"),h.Lb(5,"col",11),h.Lb(6,"col",11),h.Lb(7,"col",11),h.Lb(8,"col",11),h.Lb(9,"col",11),h.Lb(10,"col",11),h.Lb(11,"col",11),h.Lb(12,"col",11),h.Lb(13,"col",12),h.Ob(),h.Pb(14,"thead"),h.Pb(15,"tr"),h.Pb(16,"th",13),h.yc(17," Index "),h.Ob(),h.Pb(18,"th",13),h.yc(19," Unique Identity Number "),h.Ob(),h.Pb(20,"th",13),h.yc(21," Entry Reference "),h.Ob(),h.Pb(22,"th",13),h.yc(23," Status "),h.Ob(),h.Pb(24,"th",13),h.yc(25," Number "),h.Ob(),h.Pb(26,"th",13),h.yc(27," Created At "),h.Ob(),h.Pb(28,"th",13),h.yc(29," Changes "),h.Ob(),h.Ob(),h.Ob(),h.Pb(30,"tbody"),h.wc(31,U,14,12,"tr",14),h.Ob(),h.Pb(32,"tfoot"),h.Pb(33,"tr"),h.Lb(34,"td"),h.Ob(),h.Pb(35,"tr"),h.Lb(36,"td"),h.Ob(),h.Pb(37,"tr"),h.wc(38,q,1,3,"app-pagination",15),h.Ob(),h.Ob(),h.Ob(),h.Ob()),2&t){const t=h.ac();h.zb(30),h.gc("@listAnimation",t.entries.length),h.zb(1),h.gc("ngForOf",t.entries)("ngForTrackBy",t.trackById),h.zb(7),h.gc("ngIf",t.pageNumber)}}function K(t,e){if(1&t&&h.Lb(0,"app-resource-unavailable",30),2&t){const t=h.ac();h.gc("error",t.error)}}let R=(()=>{class t{constructor(t,e,n,i,s,c){this.route=t,this.router=e,this.location=n,this.us=i,this.ems=s,this.ns=c,this.entries=[],this.error=!1,this.esdl=[],this.p$esdl=!1,this.pageNumber=1,this.$entriesLength=0}trackById(t,e){return e._id}ngOnInit(){let t=this.route.snapshot.data;this.systemType=t.entries.systemType,this.title=t.entries.title,this.view=t.entries.view,this.viewWord=t.entries.viewWord,this.link=t.entries.link,this.link2=t.link2,this.$link=t.entries.$link,this.us.$systemType=this.systemType,this.us.$sa=this.$link,this.route.queryParamMap.subscribe(t=>{let e=t.get("page"),n=t.get("name");this.$entryRef=!!n||0,this.pageNumber=+e?+e:1;let i=t,s=i.keys,c={};for(let r of s){let t=i.get(r);t&&(c[r]=t)}return this.getAllEntry(c)})}getAllEntry(t){this.us.getAllEntry(t,this.link2).subscribe(t=>{if(t.length<1)return this.entries=[],this.$entriesLength=t.length,this.error=Object.assign({resource:this.systemType+" Entry or Entries"},this.ems.message);this.error=null,this.$entriesLength=t.length,this.entries=t,this.entries.length>10&&this.entries.pop()})}addEntryToDeleteList(t,e,n){e?t&&this.esdl.push(t):!e&&this.esdl.indexOf(t)>-1&&(this.esdl=this.esdl.filter(e=>{let n=e!=t;return!!n&&""+n}))}deleteManyEntry(){return!!confirm("Are you sure you want to perform this action?")&&!this.p$esdl&&(this.p$esdl=!0,void this.us.$deleteManyEntry(this.esdl).subscribe(t=>{this.p$esdl=!1,this.entries=this.entries.filter(t=>(this.ns.setNotificationStatus(!0),this.ns.addNotification(`Operation is successful and many ${this.systemType} Entry is deleted.`),this.esdl.indexOf(t.num)<0)),this.esdl=[]},t=>{this.p$esdl=!1,this.ns.setNotificationStatus(!0),this.ns.addNotification(`Operation is unsuccessful and many ${this.systemType} Entry is not deleted.`)}))}get notificationAvailable(){return this.ns.notificationStatus()}get notificationMessage(){return this.ns.getNotificationMessage()}removeNotification(){this.ns.removeNotification()}}return t.\u0275fac=function(e){return new(e||t)(h.Kb(g.a),h.Kb(g.d),h.Kb(i.h),h.Kb(p),h.Kb(f.a),h.Kb(w.a))},t.\u0275cmp=h.Eb({type:t,selectors:[["app-upload-entries"]],features:[h.yb([f.a,w.a])],decls:10,vars:7,consts:[["id","entry-main"],[4,"ngIf"],[3,"view-description","system-type",4,"ngIf"],[3,"notified","message","finished",4,"ngIf"],[1,"search-bar"],[1,"entry-option","entry-option-small","center",3,"click"],["id","error",3,"error",4,"ngIf"],[3,"view-description","system-type"],[3,"notified","message","finished"],[1,"entries"],[1,"bold","left"],[1,""],[1,"changes"],[1,"bold","center"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"entries-length","entry-ref","page-number",4,"ngIf"],[1,"center"],["nilValue",""],["class","center",4,"ngIf","ngIfElse"],[1,"center","changes-option","changes-option-full"],["class","changes-mark",4,"ngIf"],[1,"changes-mark"],[4,"ngIf","ngIfElse"],["normalChecks",""],[4,"ngFor","ngForOf"],["type","checkbox",3,"checked","click"],["checked",""],[1,"checkmark"],["type","checkbox",3,"click"],[3,"entries-length","entry-ref","page-number"],["id","error",3,"error"]],template:function(t,e){1&t&&(h.Pb(0,"div",0),h.wc(1,L,2,1,"h2",1),h.wc(2,A,1,2,"app-view-description",2),h.wc(3,T,1,2,"app-notification-screen",3),h.Lb(4,"app-list-entry-options"),h.Pb(5,"div",4),h.Pb(6,"a",5),h.Wb("click",(function(){return e.deleteManyEntry()})),h.yc(7," Delete Many "),h.Ob(),h.Ob(),h.wc(8,H,39,4,"div",1),h.wc(9,K,1,1,"app-resource-unavailable",6),h.Ob()),2&t&&(h.zb(1),h.gc("ngIf",e.title),h.zb(1),h.gc("ngIf",e.view),h.zb(1),h.gc("ngIf",e.notificationAvailable),h.zb(3),h.Cb("hide",e.esdl.length<2),h.zb(2),h.gc("ngIf",e.$entriesLength>0),h.zb(1),h.gc("ngIf",e.error))},directives:[i.l,$.a,I.a,E.a,i.k,v.a,z.a],pipes:[i.d],styles:[""],data:{animation:[P.b]}}),t})(),G={systemType:"Upload",title:"Upload",view:"gen-internal",viewWord:"Upload",link:"upload",$link:"upload",systemGuideline:"gen-internal"};const J={dashboard:Object.assign(Object.assign({},G),{canCreate:!1}),deleteAll:Object.assign(Object.assign({},G),{title:G.systemType+" Entries : Delete All",view:"uadp"}),entries:Object.assign(Object.assign({},G),{title:G.systemType+" Entries"})},Q=[{path:"",component:m.a,children:[{path:"",component:O.a,data:{dashboard:J.dashboard}},{path:"entries",component:R,data:{entries:J.entries,link2:!1}},{path:"entries/delete/all",component:k.a,canActivate:[y.a],data:{deleteAll:J.deleteAll}}]}];let V=(()=>{class t{constructor(){}}return t.\u0275mod=h.Ib({type:t}),t.\u0275inj=h.Hb({factory:function(e){return new(e||t)},imports:[[g.g.forChild(Q)],g.g]}),t})(),Y=(()=>{class t{}return t.\u0275mod=h.Ib({type:t}),t.\u0275inj=h.Hb({factory:function(e){return new(e||t)},providers:[p],imports:[[i.b,l.a,r.a,s.a,c.a,V]]}),t})()}}]);